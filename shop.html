<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Grandmaâ€™s Pantry â€¢ Shop</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>

<header class="container center">
  <a href="/index.html">
    <img src="/images/logo.jpg" alt="Grandmaâ€™s Kitchen Logo" style="max-height:100px;margin-bottom:1rem;">
  </a>
  <nav aria-label="Primary">
    <a href="/index.html">Home</a>
    <a href="/about.html">About</a>
    <a href="/recipes.html">Recipes</a>
    <a href="/shop.html" aria-current="page">Shop</a>
  </nav>
  <p>Simple food. Lifelong health. Inspired by a 104-year legacy.</p>
</header>

<main>
  <div class="container container--narrow">
    <h1>ðŸ›’ Grandmaâ€™s Pantry</h1>
    <p class="lead">Staples we actually use at homeâ€”simple, honest ingredients.</p>
  </div>

  <div class="container">
    <div id="prodGrid" class="grid grid-2">
      <!-- Filled by JS -->
    </div>
    <noscript><p>Please enable JavaScript to see products.</p></noscript>
  </div>
</main>

<footer class="container container--narrow">
  <p>Â© 2025 Grandmaâ€™s Kitchen â€¢ All rights reserved</p>
  <p class="affiliate-note">As an Amazon Associate, we (Grandma's Kitchen) earn from qualifying purchases.</p>
</footer>

<script>
(async function () {
  const grid = document.getElementById('prodGrid');

  function cardHTML(p) {
    const href = `/products/${encodeURIComponent(p.product_num || '')}`;
    const title = p.my_title || 'Product';
    const img = p.image_main || '';
    const blurb = p.my_description_short || '';

    return `
<article class="card" aria-labelledby="t-${p.product_num}">
  <a class="product-image" href="${href}">
    ${img ? `<img loading="lazy" decoding="async" src="${img}" alt="${title}">` : ''}
  </a>
  <h3 id="t-${p.product_num}" class="product-title">
    <a href="${href}">${title}</a>
  </h3>
  ${blurb ? `<p>${blurb}</p>` : ``}
  <p><a class="btn" href="${href}">View product</a></p>
</article>`;
  }

  try {
    const r = await fetch('/api/products-list');
    const { products, error } = await r.json();
    if (!r.ok) throw new Error(error || 'Fetch failed');

    if (!products || !products.length) {
      grid.innerHTML = `<p>No products yet â€” check back soon.</p>`;
      return;
    }
    grid.innerHTML = products.map(cardHTML).join('');
  } catch (e) {
    console.error(e);
    grid.innerHTML = `<p>Sorry, we couldnâ€™t load the pantry right now.</p>`;
  }
})();
</script>
</body>
</html>
